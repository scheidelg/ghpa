<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="/localstyle.css">

        <style>
            .colPrivateRepo {}
            .colPrivateFile {}
            .colLoginForm {}
            .colSSO {}
            .colAuthOnly {}
            .colRetrieveOnlyBody {}
        </style>        

        <!-- Load the GHPA functions and initial configuration. -->
        <script src="/js/GHPA.js"></script>

        <!-- Load a few miscellanoues scripts; not part of GHPA, just quick
             point-solutions. -->
        <script src="/js/misc.js"></script>
    </head>
    <body>
        <noscript><p>
            GHPA requires client-side JavaScript to be enabled. Please enable JavaScript and reload the page.
        <p></noscript>

        <h1>GitHub Pages Authentication (GHPA)</h1>
        
        <p>GitHub Pages Authentication (GHPA) allows a GitHub Pages website to be used as a secure front-end for content stored in a private GitHub repository. This website demonstrates using GHPA.<p>
        
        <p>For details on GHPA, see <a href="https://github.com/scheidelg/ghpa">https://github.com/scheidelg/ghpa</a>.</p>

        <hr>

        <table>
            <colgroup>
                <col span="2">
                <col class="colPrivateRepo">
                <col class="colPrivateFile">
                <col class="colLoginForm">
                <col class="colSSO">
                <col class="colAuthOnly">
                <col class="colRetrieveOnlyBody">
            </colgroup>
            <tr>
                <th colspan="8" style="font-style: italic;">The listed pages demonstrate some (but not all) of the ways to use GHPA to access content in the private GitHub repository.</th>
            <tr>
            <tr>
                <th>Description</a></th>
                <th>Public File</a></th>
                <th><a href="#ghpaRepo" onclick="flashElement(document.getElementById('ghpaRepo'));">Private Repo</a></th>
                <th><a href="#ghpaFilename" onclick="flashElement(document.getElementById('ghpaFilename'));">Private File</a></th>
                <th><a href="#ghpaLoginFormFile" onclick="flashElement(document.getElementById('ghpaLoginFormFile'));">Login Form</a></th>
                <th><a href="#ghpaSSOFlag" onclick="flashElement(document.getElementById('ghpaSSOFlag'));">SSO?</a></th>
                <th><a href="#ghpaAuthOnlyFlag" onclick="flashElement(document.getElementById('ghpaAuthOnlyFlag'));">Auth Only?</a></th>
                <th><a href="#ghpaRenderRetrievedBodyOnlyFlag" onclick="flashElement(document.getElementById('ghpaRenderRetrievedBodyOnlyFlag'));">Retrieve Only &lt;body&gt;?</a></th>
            </tr>
            <tr>
                <td><a href="examples/file1.html">Public stub file, corresponding private file</a>
                    <p>The stub file exists in the public repository and a corresponding private file exists in the private repository.</p>
                </td>
                <td>file1.html</td>
                <td>(global)</td>
                <td>(default)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/file2.html">Public stub file, corresponding private file, no SSO</a>
                    <p>The stub file exists in the private repository and a corresponding private file exists in the private repository. However, the public stub file explicitly includes a flag to <b>not</b> use or cache credentials.</p>
                </td>
                <td>file2.html</td>
                <td>(global)</td>
                <td>(default)</td>
                <td>(global)</td>
                <td>N</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/file3.html">Public stub file, corresponding private file, different login form</a>
                    <p>The stub file exists in the public repository and a corresponding private file exists in the private repository. This example uses a different login form.</p>
                </td>
                <td>file3.html</td>
                <td>(global)</td>
                <td>(default)</td>
                <td>loginform-right.html</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/explicit.html">Public stub file, different private file via absolute path</a>
                    <p>The stub file exists in the public repository but explicitly identifies a different file to load from the private repository. The file is identified with an absolute path.</p></td>
                <td>explicit.html</td>
                <td>(global)</td>
                <td>/examples/file4.html</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/file5.html">Public stub file, different private file via relative path</a>
                    <p>The stub file exists in the public repository but explicitly identifies a different file to load from the private repository. The file is identified with a relative path.</p></td>
                <td>file5.html</td>
                <td>(global)</td>
                <td>sub/file5.html</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/no_file.html">Public stub file, no corresponding private file</a>
                    <p>The stub file exists in the public repository but there's no corresponding file in the private repository.</p>
                </td>
                <td>no_file.html</td>
                <td>(global)</td>
                <td>(none)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/file4.html">Public stub file, different private repository</a>
                    <p>The stub file exists in the public repository but explicitly identifies a different private repository to load the private file from.</p></td>
                <td>file4.html</td>
                <td>ghpa-private-2</td>
                <td>(default)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/file1_repo2.html">Public stub file, different private repository, different file in same directory</a>
                    <p>The stub file exists in the public repository but explicitly identifies a different private repository from which to load a different private file. The file is identified only by it's filename, meaning that the file will be retrieved from the same relative directory as the public stub file.</p></td>
                <td>file1_repo2.html</td>
                <td>ghpa-private-2</td>
                <td>file1.html</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/login.html">Login to GitHub</a>
                    <p>Access the login page to authenticate to GitHub and cache credentials, without actually loading a private file. This is useful only to establish authentication for SSO.</p>
                </td>
                <td>login.html</td>
                <td>(global)</td>
                <td>(none)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>Y</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/logout.html">Logout of the private repository</a>
                    <p>Clear cached credentials so the user has to authenticate again to access content from the private repository.</p>
                </td>
                <td>logout.html</td>
                <td>(global, n/a)</td>
                <td>(none)</td>
                <td>(global, n/a)</td>
                <td>(global, n/a)</td>
                <td>(global, n/a)</td>
                <td>(global, n/a)</td>
            </tr>
        </table>

        <table>
            <tr>
                <th colspan="4" style="font-style: italic;">These are the currently configured global GHPA configuration options and variables.</th>
            </tr>
            <tr>
                <th>Description</th>
                <th>Variable</th>
                <th>Value</th>
                <th>Page Can Override?</th>
            </tr>
            <tr>
                <td>Current GitHub and GHPA SSO user ID</td>
                <td>ghpaUserID</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaUserID, undefined, undefined, '(not currently logged in)')));</script></td>
<!--                <td><script>document.write(htmlEncode(typeof ghpaUserID === '(undefined)' ? 'undefined' : (ghpaUserID ? ghpaUserID : '(not currently logged in)')))</script></td> -->
                <td>Y</td>
            </tr>
            <tr>
                <td>GitHub Organization
                    <p>The GitHub organization that will be used unless overridden on a specific web page.</p>
                </td>
                <td>ghpaOrg</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaOrg)));</script></td>
<!--                <td><script>document.write(htmlEncode(typeof ghpaOrg === '(undefined)' ? 'undefined' : (ghpaOrg ? ghpaOrg : '(empty)')))</script></td> -->
                <td>Y</td>
            </tr>
            <tr id='ghpaRepo'>
                <td>GitHub Repository
                    <p>The GitHub repository that will be used unless overridden on a specific web page.</p>
                </td>
                <td>ghpaRepo</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaRepo)));</script></td>
<!--                <td><script>document.write(htmlEncode(typeof ghpaRepo === '(undefined)' ? 'undefined' : (ghpaRepo ? ghpaRepo : '(empty)')))</script></td> -->
                <td>Y</td>
            </tr>
            <tr>
                <td>GitHub Branch
                    <p>The GitHub branch that will be used unless overridden on a specific web page.</p>
                </td>
                <td>ghpaBranch</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaBranch)));</script></td>
<!--                <td><script>document.write(htmlEncode(typeof ghpaBranch === '(undefined)' ? 'undefined' : (ghpaBranch ? ghpaBranch : '(empty)')))</script></td> -->
                <td>Y</td>
            </tr>
            <tr>
                <td>Default HTML File
                    <p>The HTML file to retrieve from the private GitHub repository if the browsing a GitHub Pages directory.</p>
                </td>
                <td>ghpaDefaultHTMLfile</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaDefaultHTMLfile)));</script></td>
<!--                <td><script>document.write(htmlEncode(typeof ghpaDefaultHTMLfile === '(undefined)' ? 'undefined' : (ghpaDefaultHTMLfile ? ghpaDefaultHTMLfile : '(empty)')))</script></td> -->
                <td>Y</td>
            </tr>
            <tr id='ghpaLoginFormFile'>
                <td>Login Form File
                    <p>The HTML file to load as the login form when the user needs to authenticate to GitHub.<br></p>
                </td>
                <td>ghpaLoginFormFile</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaLoginFormFile)));</script></td>
<!--                <td><script>document.write(htmlEncode(typeof ghpaLoginFormFile === '(undefined)' ? 'undefined' : (ghpaLoginFormFile ? ghpaLoginFormFile : '(empty)')))</script></td> -->
                <td>Y</td>
            </tr>
            <tr id='ghpaFilename'>
                <td>File to Retrieve 
                    <p>The name of the file to retrieve from the private GitHub repository. This should always be empty in the global configuration.</p>
                </td>
                <td>ghpaFilename</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaFilename)));</script></td>
<!--                <td><script>document.write(htmlEncode(typeof ghpaFilename === '(undefined)' ? 'undefined' : (ghpaFilename ? ghpaFilename : '(empty)')))</script></td> -->
                <td>Y</td>
            </tr>
            <tr>
                <td>Flag: GitHub Tokens Only
                    <p>Should the password be required to match the format of a GitHub personal access token string?</p>
                </td>
                <td>ghpaTokensOnlyFlag</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaTokensOnlyFlag)));</script></td>
<!--                <td><script>document.write(htmlEncode(typeof ghpaTokensOnlyFlag === '(undefined)' ? 'undefined' : (ghpaTokensOnlyFlag ? '(true)': '(false)')))</script></td> -->
                <td>N</td>
            </tr>
            <tr id='ghpaSSOFlag'>
                <td>Flag: Single Sign-on (SSO)
                    <p>Should successful authentication cause GitHub credentials to be remembered and used for later authentication (so that the user doesn't have to continually re-enter the credentials)?</p>
                </td>
                <td>ghpaSSOFlag</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaSSOFlag)));</script></td>
<!--                <td><script>document.write(htmlEncode(typeof ghpaSSOFlag === '(undefined)' ? 'undefined' : (ghpaSSOFlag ? '(true)' : '(false)')))</script></td> -->
                <td>Y</td>
            </tr>
            <tr id='ghpaAuthOnlyFlag'>
                <td>Flag: Authentication Only
                    <p>Should a public stub file should only perform a GitHub authentication check (e.g., authentication-only) vs. loading a page from the private GitHub repository?</p>
                </td>
                <td>ghpaAuthOnlyFlag</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaAuthOnlyFlag)));</script></td>
<!--                <td><script>document.write(htmlEncode(typeof ghpaAuthOnlyFlag === '(undefined)' ? 'undefined' : (ghpaAuthOnlyFlag ? '(true)' : '(false)')))</script></td> -->
                <td>Y</td>
            </tr>
            <tr id='ghpaRenderRetrievedBodyOnlyFlag'>
                <td>Flag: Only Render Retreived Body
                    <p>After retrieving content from a private GitHub repository file, should we check the retrieved content for &lt;body&gt;&lt;/body&gt; tags and only render that content, vs. rendering all the retrieved content?</p>
                </td>
                <td>ghpaRenderRetrievedBodyOnlyFlag</td>
                <td><script>document.write(htmlEncode(displayVarVal(ghpaRenderRetrievedBodyOnlyFlag)));</script></td>
                <td>Y</td>
            </tr>
        <table>
    </body>
</html>
