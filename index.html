<!DOCTYPE html>
<html>
    <head>
        <link rel="stylesheet" type="text/css" href="/localstyle.css">

        <!-- Load the GHPA functions and initial configuration. -->
        <script src="/js/GHPA.js"></script>

        <!-- Quick function to make an element flash on screen -->
        <script>
            async function flashElement(elementReference) {

                let flashCount;
                const secondsNewStyle = 900
                const secondsOldStyle = 300
                //const startTime = new Date();
                const oldStyle=elementReference.style

                elementReference.style.color = 'blue';

                for (flashCount = 0; flashCount < 5; flashCount++) {

                    setTimeout(function(){ elementReference.style = oldStyle; }, ((flashCount * (secondsNewStyle + secondsOldStyle)) + secondsNewStyle));

                    setTimeout(function(){ elementReference.style.color = 'blue'; }, ((flashCount * (secondsNewStyle + secondsOldStyle)) + (secondsNewStyle + secondsOldStyle)));

                }

                setTimeout(function(){ elementReference.style = oldStyle; }, ((flashCount * (secondsNewStyle + secondsOldStyle)) + secondsNewStyle));

                return (true);
            }
        </script>
    </head>
    <body>
        <noscript><p>
            GHPA requires client-side JavaScript to be enabled. Please enable JavaScript and reload the page.
        <p></noscript>

        <h1>GitHub Pages Authentication (GHPA)</h1>
        
        <p>GitHub Pages Authentication (GHPA) allows a GitHub Pages website to be used as a secure front-end for content stored in a private GitHub repository. This website demonstrates using GHPA.<p>
        
        <p>For details on GHPA, see <a href="https://github.com/scheidelg/ghpa">https://github.com/scheidelg/ghpa</a>.</p>

        <hr>

        <table>
            <tr>
                <th colspan="8" style="font-style: italic;">These pages demonstrate different ways to use GHPA to access the content in the private GitHub repository.</th>
            <tr>
            <tr>
                <th>Description</a></th>
                <th>Public File</a></th>
                <th><a href="#ghpaRepo" onclick="flashElement(document.getElementById('ghpaRepo'));">Private Repo</a></th>
                <th><a href="#ghpaFileName" onclick="flashElement(document.getElementById('ghpaFileName'));">Private File</a></th>
                <th><a href="#ghpaLoginFormFile" onclick="flashElement(document.getElementById('ghpaLoginFormFile'));">Login Form</a></th>
                <th><a href="#ghpaSSOFlag" onclick="flashElement(document.getElementById('ghpaSSOFlag'));">SSO?</a></th>
                <th><a href="#ghpaAuthOnlyFlag" onclick="flashElement(document.getElementById('ghpaAuthOnlyFlag'));">Auth Only?</a></th>
                <th><a href="#ghpaRenderRetrievedBodyOnlyFlag" onclick="flashElement(document.getElementById('ghpaRenderRetrievedBodyOnlyFlag'));">Retrieve Only &lt;body&gt;?</a></th>
            </tr>
            <tr>
                <td><a href="examples/file1.html">Public stub file, corresponding private file</a>
                    <p>The stub file exists in the public repository and a corresponding private file exists in the private repository.</p>
                </td>
                <td>file1.html</td>
                <td>(global)</td>
                <td>(default)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/file2.html">Public stub file, corresponding private file, no SSO</a>
                    <p>The stub file exists in the private repository and a corresponding private file exists in the private repository. However, the public stub file explicitly includes a flag to <b>not</b> use or cache credentials.</p>
                </td>
                <td>file2.html</td>
                <td>(global)</td>
                <td>(default)</td>
                <td>(global)</td>
                <td>N</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/file3.html">Public stub file, corresponding private file, different login form</a>
                    <p>The stub file exists in the public repository and a corresponding private file exists in the private repository. This example uses a different login form.</p>
                </td>
                <td>file3.html</td>
                <td>(global)</td>
                <td>(default)</td>
                <td>loginform-right.html</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/explicit.html">Public stub file, different private file</a>
                    <p>The stub file exists in the public repository but explicitly identifies a different file to load from the private repository.</p></td>
                <td>explicit.html</td>
                <td>(global)</td>
                <td>file4.html</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/no_file.html">Public stub file, no corresponding private file</a>
                    <p>The stub file exists in the public repository but there's no corresponding file in the private repository.</p>
                </td>
                <td>no_file.html</td>
                <td>(global)</td>
                <td>(none)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/login.html">Login to GitHUb</a>
                    <p>Access the login page to authenticate to GitHub and cache credentials, without actually loading a private file. This is useful only to establish authentication for SSO.</p>
                </td>
                <td>login.html</td>
                <td>(global)</td>
                <td>(none)</td>
                <td>(global)</td>
                <td>(global)</td>
                <td>Y</td>
                <td>(global)</td>
            </tr>
            <tr>
                <td><a href="examples/logout.html">Logout of the private repository</a>
                    <p>Clear cached credentials so the user has to authenticate again to access content from the private repository.</p>
                </td>
                <td>logout.html</td>
                <td>(global, n/a)</td>
                <td>(none)</td>
                <td>(global, n/a)</td>
                <td>(global, n/a)</td>
                <td>(global, n/a)</td>
                <td>(global, n/a)</td>
            </tr>
        </table>

        <table>
            <tr>
                <th colspan="4" style="font-style: italic;">These are the currently configured global GHPA configuration options and variables.</th>
            <tr>
            <tr>
                <th>Description</th>
                <th>Variable</th>
                <th>Value</th>
                <th>Page Can Override?</th>
            </tr>
            <tr>
                <td>Current GitHub and GHPA SSO user ID</td>
                <td>ghpaUserID</td>
                <td><script>document.write (typeof ghpaUserID === '(undefined)' ? 'undefined' : (ghpaUserID ? ghpaUserID : '(not currently logged in)'))</script></td>
                <td>Y</td>
            </tr>
            <tr>
                <td>GitHub Organization
                    <p>The GitHub organization that will be used unless overridden on a specific web page.</p>
                </td>
                <td>ghpaOrg</td>
                <td><script>document.write (typeof ghpaOrg === '(undefined)' ? 'undefined' : (ghpaOrg ? ghpaOrg : '(empty)'))</script></td>
                <td>Y</td>
            </tr>
            <tr>
                <td>GitHub Repository
                    <p>The GitHub repository that will be used unless overridden on a specific web page.</p>
                </td>
                <td>ghpaRepo</td>
                <td><script>document.write (typeof ghpaRepo === '(undefined)' ? 'undefined' : (ghpaRepo ? ghpaRepo : '(empty)'))</script></td>
                <td>Y</td>
            </tr>
            <tr>
                <td>GitHub Branch
                    <p>The GitHub branch that will be used unless overridden on a specific web page.</p>
                </td>
                <td>ghpaBranch</td>
                <td><script>document.write (typeof ghpaBranch === '(undefined)' ? 'undefined' : (ghpaBranch ? ghpaBranch : '(empty)'))</script></td>
                <td>Y</td>
            </tr>
            <tr>
                <td>Default HTML File
                    <p>The HTML file to retrieve from the private GitHub repository if the browsing a GitHub Pages directory.</p>
                </td>
                <td>ghpaDefaultHTMLfile</td>
                <td><script>document.write (typeof ghpaDefaultHTMLfile === '(undefined)' ? 'undefined' : (ghpaDefaultHTMLfile ? ghpaDefaultHTMLfile : '(empty)'))</script></td>
                <td>Y</td>
            </tr>
            <tr>
                <td>Login File
                    <p>The HTML file to load as the login form when the user needs to authenticate to GitHub.<br></p>
                </td>
                <td>ghpaLoginFormfile</td>
                <td><script>document.write (typeof ghpaLoginFormfile === '(undefined)' ? 'undefined' : (ghpaLoginFormfile ? ghpaLoginFormfile : '(empty)'))</script></td>
                <td>Y</td>
            </tr>
            <tr>
                <td>File to Retrieve 
                    <p>The name of the file to retrieve from the private GitHub repository. This should always be empty in the global configuration.</p>
                </td>
                <td>ghpaFilename</td>
                <td><script>document.write (typeof ghpaFilename === '(undefined)' ? 'undefined' : (ghpaFilename ? ghpaFilename : '(empty)'))</script></td>
                <td>Y</td>
            </tr>
            <tr>
                <td>Flag: GitHub Tokens Only
                    <p>Should the password be required to match the format of a GitHub personal access token string?</p>
                </td>
                <td>ghpaTokensOnlyFlag</td>
                <td><script>document.write (typeof ghpaTokensOnlyFlag === '(undefined)' ? 'undefined' : (ghpaTokensOnlyFlag ? ghpaTokensOnlyFlag : '(false)'))</script></td>
                <td>N</td>
            </tr>
            <tr>
                <td>Flag: Single Sign-on (SSO)
                    <p>Should successful authentication cause GitHub credentials to be remembered and used for later authentication (so that the user doesn't have to continually re-enter the credentials)?</p>
                </td>
                <td>ghpaSSOFlag</td>
                <td><script>document.write (typeof ghpaSSOFlag === '(undefined)' ? 'undefined' : (ghpaSSOFlag ? ghpaSSOFlag : '(false)'))</script></td>
                <td>Y</td>
            </tr>
            <tr>
                <td>Flag: Authentication Only
                    <p>Should a public stub file should only perform a GitHub authentication check (e.g., authentication-only) vs. loading a page from the private GitHub repository?</p>
                </td>
                <td>ghpaAuthOnlyFlag</td>
                <td><script>document.write (typeof ghpaAuthOnlyFlag === '(undefined)' ? 'undefined' : (ghpaAuthOnlyFlag ? ghpaAuthOnlyFlag : '(false)'))</script></td>
                <td>Y</td>
            </tr>
            <tr id='ghpaRenderRetrievedBodyOnlyFlag'>
                <td>Flag: Only Render Retreived Body
                    <p>After retrieving content from a private GitHub repository file, should we check the retrieved content for &lt;body&gt;&lt;/body&gt; tags and only render that content, vs. rendering all the retrieved content?</p>
                </td>
                <td>ghpaRenderRetrievedBodyOnlyFlag</td>
                <td><script>document.write (typeof ghpaRenderRetrievedBodyOnlyFlag === '(undefined)' ? 'undefined' : (ghpaRenderRetrievedBodyOnlyFlag ? ghpaRenderRetrievedBodyOnlyFlag : '(false)'))</script></td>
                <td>Y</td>
            </tr>
        <table>
    </body>
</html>
